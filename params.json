{"name":"Pgdbsync","body":"pgdbsync allows us to track the differences in the database structure between different databases. It also create the needed script to synchronize the servers and even to run the script.\r\n\r\nThe usage of pgdbsync command line script is the following one:\r\n\r\n* -c [schema]\r\n* -f [from database]\r\n* -t [to database]\r\n* -a [action: diff | summary | run]\r\n\r\n### Summary\r\n```\r\n./pgdbsync -s web -f devel -t prod -a summary\r\nHOST : production :: prod1\r\n--------------------------------------------\r\nfunction\r\n create :: WEB.hello(varchar)\r\ntables\r\n create :: WEB.test\r\nview\r\n create :: WEB.testview\r\n\r\n[OK]  end process\r\n```\r\n### Creating diff script\r\n```\r\n./pgdbsync -s wf -f devel -t prod -a diff\r\nHOST : production :: prod1\r\n--------------------------------------------\r\nCREATE OR REPLACE FUNCTION web.hello(item character varying)\r\n RETURNS character varying\r\n LANGUAGE plpgsql\r\nAS $function$\r\nDECLARE\r\nBEGIN\r\n return \"Hi \" || item;\r\nEND;\r\n$function$\r\n\r\nCREATE TABLE web.test(\r\n test_name character NOT NULL,\r\n test_id integer NOT NULL,\r\n test_date timestamp without time zone NOT NULL,\r\n CONSTRAINT pk_test PRIMARY KEY (test_date)\r\n)\r\nTABLESPACE web;\r\nALTER TABLE web.test OWNER TO user;\r\n\r\nCREATE OR REPLACE VIEW web.testview AS\r\n SELECT test.test_name, test.test_id, test.test_date FROM web.test WHERE (test.test_name ~~ 't%'::text);;\r\nALTER TABLE web.testview OWNER TO user;\r\n[OK]  end process\r\n```\r\n### executing diff script\r\n```\r\n./pgdbsync -s web -f devel -t prod -a run\r\nHOST : production :: prod1\r\n----------------------------------\r\nï»¿\r\n[OK]  end process\r\n```\r\n### creating diff script again\r\n```\r\n./pgdbsync -s wf -f devel -t prod1 -a diff\r\n\r\nHOST : prododuction :: prod1\r\n--------------------------------------------\r\n\r\ndrop function web.hello(varchar);\r\n\r\nDROP TABLE web.test;\r\n\r\ndrop view web.testview;\r\n\r\n[OK]  end process\r\n```\r\nMore info:\r\n\r\nhttp://gonzalo123.wordpress.com/2010/12/13/keep-our-postgresql-databases-syncronized-with-php-database-version-control/","tagline":"Keep our PostgreSQL's development server and production servers synchronized","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}